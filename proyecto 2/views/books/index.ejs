<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Libros</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>

<body class="bg-light d-flex flex-column min-vh-100">

  <div class="container my-5">

    <!-- Título de la página -->
    <div class="text-center mb-4">
      <h1 class="display-4">Gestión de Libros</h1>
      <p class="lead text-muted">Consulta, agrega, edita o elimina libros de tu colección fácilmente.</p>
    </div>

    <!-- Mensajes Flash -->
    <% if (messages.success) { %>
      <div class="alert alert-success alert-dismissible fade show" role="alert">
        <%- messages.success %>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
      </div>
    <% } %>

    <% if (messages.error) { %>
      <div class="alert alert-danger alert-dismissible fade show" role="alert">
        <%- messages.error %>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Cerrar"></button>
      </div>
    <% } %>

    <!-- Tarjeta de libros -->
    <div class="card shadow-sm">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0">Lista de Libros</h5>
        <a class="btn btn-primary" href="/books/add">Agregar Libro</a>
      </div>
      <div class="card-body">
        <% if (data.length) { %>
          <div class="table-responsive">
            <table class="table table-striped table-hover align-middle text-center">
              <thead class="table-dark">
                <tr>
                  <th>#</th>
                  <th>Título</th>
                  <th>Autor</th>
                  <th style="width: 200px;">Acciones</th>
                </tr>
              </thead>
              <tbody>
                <% for (var i = 0; i < data.length; i++) { %>
                  <tr>
                    <th scope="row"><%= i + 1 %></th>
                    <td><%= data[i].name %></td>
                    <td><%= data[i].author %></td>
                    <td>
                      <a class="btn btn-sm btn-success" href="../books/edit/<%= data[i].id %>">Editar</a>
                      <a class="btn btn-sm btn-danger" href="../books/delete/<%= data[i].id %>" onclick="return confirm('¿Estás seguro de que deseas eliminar este libro?')">Eliminar</a>
                    </td>
                  </tr>
                <% } %>
              </tbody>
            </table>
          </div>
        <% } else { %>
          <p class="text-center text-muted mb-0">No se encontraron libros.</p>
        <% } %>
      </div>
    </div>

  </div>

  <!-- Footer -->
  <footer class="mt-auto bg-dark text-white py-4">
    <div class="container text-center">
      <p class="mb-1">&copy; <%= new Date().getFullYear() %> Gestor de Libros. Todos los derechos reservados.</p>
      <small class="text-muted">Desarrollado con ♥ usando Bootstrap 5</small>
    </div>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>